# ============================================
# Surge é…ç½®æ–‡ä»¶ v2
# æ ¹æ®å®˜æ–¹æ–‡æ¡£ä¼˜åŒ–
# Mac + iPhone åŒå¹³å°é€šç”¨
# æ›´æ–°æ—¥æœŸ: 2026-01-11
# ============================================

[General]
# ==================== æ—¥å¿— ====================
loglevel = notify

# ==================== ç½‘ç»œæµ‹è¯• ====================
internet-test-url = http://www.baidu.com
proxy-test-url = http://cp.cloudflare.com/generate_204
test-timeout = 3

# ==================== DNS ====================
dns-server = 223.5.5.5, 119.29.29.29, system
encrypted-dns-server = https://dns.alidns.com/dns-query
encrypted-dns-skip-cert-verification = true

# ==================== è·³è¿‡ä»£ç† ====================
skip-proxy = 127.0.0.1, 192.168.0.0/16, 10.0.0.0/8, 172.16.0.0/12, 100.64.0.0/10, 17.0.0.0/8, localhost, *.local, *.crashlytics.com
exclude-simple-hostnames = true

# ==================== IPv6 ====================
ipv6 = false
ipv6-vif = disabled

# ==================== GeoIP ====================
geoip-maxmind-url = https://github.com/Hackl0us/GeoIP2-CN/raw/release/Country.mmdb
disable-geoip-db-auto-update = false

# ==================== çœŸå® IP ====================
# AI æœåŠ¡éœ€è¦çœŸå® IPï¼Œé¿å… DNS é—®é¢˜
always-real-ip = *.lan, *.googleapis.com, ai.google.dev, *.openai.com, *.anthropic.com

# ==================== å¼ºåˆ¶ HTTP å¼•æ“å¤„ç† ====================
# è®© Surge æ¥ç®¡è¿™äº›åŸŸåçš„è¯·æ±‚ï¼ˆå³ä½¿æ˜¯æœ¬åœ°åº”ç”¨å‘èµ·çš„ï¼‰
force-http-engine-hosts = generativelanguage.googleapis.com, ai.google.dev, *.openai.com, claude.ai

# ==================== DNS åŠ«æŒ ====================
hijack-dns = *:53

# ==================== UDP ====================
udp-priority = true
udp-policy-not-supported-behaviour = REJECT

# ==================== é”™è¯¯é¡µé¢ ====================
show-error-page-for-reject = true

# ==================== iOS ä¸“ç”¨ ====================
allow-wifi-access = true
wifi-access-http-port = 6152
wifi-access-socks5-port = 6153
allow-hotspot-access = true

# ==================== Mac ä¸“ç”¨ ====================
http-listen = 0.0.0.0:6152
socks5-listen = 0.0.0.0:6153

# ============================================
# ä»£ç†èŠ‚ç‚¹
# ============================================
[Proxy]
# Surge å†…ç½® DIRECT å’Œ REJECTï¼Œæ— éœ€å®šä¹‰

# ============================================
# ç­–ç•¥ç»„
# ============================================
[Proxy Group]
# ==================== ä¸»ç­–ç•¥ ====================
èŠ‚ç‚¹é€‰æ‹© = select, è‡ªåŠ¨é€‰æ‹©, é¦™æ¸¯èŠ‚ç‚¹, æ—¥æœ¬èŠ‚ç‚¹, å°æ¹¾èŠ‚ç‚¹, æ–°åŠ å¡èŠ‚ç‚¹, ç¾å›½èŠ‚ç‚¹, DIRECT

# è‡ªåŠ¨é€‰æ‹© - ä½¿ç”¨ url-testï¼Œå®˜æ–¹æ¨èå‚æ•°
è‡ªåŠ¨é€‰æ‹© = url-test, include-other-group=æˆ‘çš„èŠ‚ç‚¹, url=http://cp.cloudflare.com/generate_204, interval=600, tolerance=100, timeout=3

# ==================== åŠŸèƒ½ç­–ç•¥ ====================
# AI æœåŠ¡ - é»˜è®¤ç¾å›½
AIæœåŠ¡ = select, ç¾å›½èŠ‚ç‚¹, æ—¥æœ¬èŠ‚ç‚¹, èŠ‚ç‚¹é€‰æ‹©

# Apple æœåŠ¡
AppleæœåŠ¡ = select, DIRECT, èŠ‚ç‚¹é€‰æ‹©, ç¾å›½èŠ‚ç‚¹

# å¹¿å‘Šæ‹¦æˆª
å¹¿å‘Šæ‹¦æˆª = select, REJECT, DIRECT

# å…œåº•
Final = select, èŠ‚ç‚¹é€‰æ‹©, DIRECT

# ==================== åœ°åŒºèŠ‚ç‚¹ï¼ˆä½¿ç”¨ smart ç­–ç•¥ç»„ï¼‰====================
# smart æ˜¯ Surge 5.11+ çš„æ–°ç‰¹æ€§ï¼Œæ¯” url-test æ›´æ™ºèƒ½
# ä¼šè‡ªåŠ¨å¤„ç†æ•…éšœåˆ‡æ¢ï¼Œæ— éœ€æ‰‹åŠ¨å¹²é¢„
é¦™æ¸¯èŠ‚ç‚¹ = smart, include-other-group=æˆ‘çš„èŠ‚ç‚¹, policy-regex-filter=(ğŸ‡­ğŸ‡°)|(é¦™æ¸¯)|(Hong)|(HK)
ç¾å›½èŠ‚ç‚¹ = smart, include-other-group=æˆ‘çš„èŠ‚ç‚¹, policy-regex-filter=(ğŸ‡ºğŸ‡¸)|(ç¾å›½)|(States)|(US)
æ—¥æœ¬èŠ‚ç‚¹ = smart, include-other-group=æˆ‘çš„èŠ‚ç‚¹, policy-regex-filter=(ğŸ‡¯ğŸ‡µ)|(æ—¥æœ¬)|(Japan)|(JP)
å°æ¹¾èŠ‚ç‚¹ = smart, include-other-group=æˆ‘çš„èŠ‚ç‚¹, policy-regex-filter=(ğŸ‡¹ğŸ‡¼)|(å°æ¹¾)|(Tai)|(TW)
æ–°åŠ å¡èŠ‚ç‚¹ = smart, include-other-group=æˆ‘çš„èŠ‚ç‚¹, policy-regex-filter=(ğŸ‡¸ğŸ‡¬)|(æ–°åŠ å¡)|(Singapore)|(SG)

# ==================== è®¢é˜…èŠ‚ç‚¹ ====================
æˆ‘çš„èŠ‚ç‚¹ = select, policy-path=https://sub.store/download/collection/ALL?target=Surge, update-interval=86400


# ============================================
# åˆ†æµè§„åˆ™
# ============================================
[Rule]
# ==================== AI æœåŠ¡ï¼ˆæœ€é«˜ä¼˜å…ˆçº§ï¼‰====================
# Google Gemini API - å¿…é¡»æ”¾åœ¨æœ€å‰é¢ï¼
DOMAIN,generativelanguage.googleapis.com,AIæœåŠ¡
# Google API IP æ®µï¼ˆå½“ DNS è§£æåç›´æ¥ç”¨ IP è¿æ¥æ—¶ï¼‰
IP-CIDR,142.250.0.0/15,AIæœåŠ¡,no-resolve
IP-CIDR,172.217.0.0/16,AIæœåŠ¡,no-resolve
IP-CIDR,216.58.192.0/19,AIæœåŠ¡,no-resolve
DOMAIN,ai.google.dev,AIæœåŠ¡
DOMAIN,aistudio.google.com,AIæœåŠ¡
DOMAIN,gemini.google.com,AIæœåŠ¡
DOMAIN,bard.google.com,AIæœåŠ¡
DOMAIN,makersuite.google.com,AIæœåŠ¡
DOMAIN,aiplatform.googleapis.com,AIæœåŠ¡
DOMAIN,proactivebackend-pa.googleapis.com,AIæœåŠ¡
DOMAIN-SUFFIX,deepmind.com,AIæœåŠ¡
DOMAIN-SUFFIX,deepmind.google,AIæœåŠ¡

# OpenAI / ChatGPT
DOMAIN-SUFFIX,openai.com,AIæœåŠ¡
DOMAIN-SUFFIX,ai.com,AIæœåŠ¡
DOMAIN-SUFFIX,chatgpt.com,AIæœåŠ¡

# Claude / Anthropic
DOMAIN-SUFFIX,anthropic.com,AIæœåŠ¡
DOMAIN-SUFFIX,claude.ai,AIæœåŠ¡

# Copilot
DOMAIN,copilot.microsoft.com,AIæœåŠ¡
DOMAIN,sydney.bing.com,AIæœåŠ¡

# å…¶ä»– AI
DOMAIN-SUFFIX,perplexity.ai,AIæœåŠ¡
DOMAIN-SUFFIX,poe.com,AIæœåŠ¡
DOMAIN-SUFFIX,midjourney.com,AIæœåŠ¡
DOMAIN-SUFFIX,stability.ai,AIæœåŠ¡
DOMAIN-SUFFIX,huggingface.co,AIæœåŠ¡

# ==================== å¹¿å‘Šæ‹¦æˆª ====================
DOMAIN-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Advertising/Advertising_Domain.list,å¹¿å‘Šæ‹¦æˆª,extended-matching
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Advertising/Advertising.list,å¹¿å‘Šæ‹¦æˆª,extended-matching

# ==================== AI æœåŠ¡ï¼ˆå¤‡ç”¨ï¼Œå·²ç§»åˆ°æœ€å‰é¢ï¼‰====================
# ï¼ˆè§„åˆ™å·²ç§»åˆ°æ–‡ä»¶æœ€å‰é¢ï¼‰

# ==================== Apple æœåŠ¡ ====================
# ç³»ç»Ÿæ›´æ–°ç›´è¿ï¼ˆå®˜æ–¹æ¨èï¼‰
DOMAIN,mesu.apple.com,DIRECT
DOMAIN,gdmf.apple.com,DIRECT
DOMAIN,updates-http.cdn-apple.com,DIRECT
DOMAIN-SUFFIX,appldnld.apple.com,DIRECT

# ä½¿ç”¨ Surge å†…ç½® SYSTEM è§„åˆ™é›†
RULE-SET,SYSTEM,DIRECT

# Apple å…¶ä»–æœåŠ¡
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Apple/Apple.list,AppleæœåŠ¡,extended-matching

# ==================== å¸¸ç”¨å›½é™…æœåŠ¡ ====================
# Google
DOMAIN-SUFFIX,google.com,èŠ‚ç‚¹é€‰æ‹©
DOMAIN-SUFFIX,googleapis.com,èŠ‚ç‚¹é€‰æ‹©
DOMAIN-SUFFIX,gstatic.com,èŠ‚ç‚¹é€‰æ‹©
DOMAIN-SUFFIX,googlevideo.com,èŠ‚ç‚¹é€‰æ‹©
DOMAIN-SUFFIX,youtube.com,èŠ‚ç‚¹é€‰æ‹©
DOMAIN-SUFFIX,ytimg.com,èŠ‚ç‚¹é€‰æ‹©
DOMAIN-KEYWORD,google,èŠ‚ç‚¹é€‰æ‹©

# GitHub
DOMAIN-SUFFIX,github.com,èŠ‚ç‚¹é€‰æ‹©
DOMAIN-SUFFIX,githubusercontent.com,èŠ‚ç‚¹é€‰æ‹©
DOMAIN-SUFFIX,githubassets.com,èŠ‚ç‚¹é€‰æ‹©

# Twitter/X
DOMAIN-SUFFIX,twitter.com,èŠ‚ç‚¹é€‰æ‹©
DOMAIN-SUFFIX,x.com,èŠ‚ç‚¹é€‰æ‹©
DOMAIN-SUFFIX,twimg.com,èŠ‚ç‚¹é€‰æ‹©

# Telegram
DOMAIN-SUFFIX,telegram.org,èŠ‚ç‚¹é€‰æ‹©
DOMAIN-SUFFIX,t.me,èŠ‚ç‚¹é€‰æ‹©
IP-CIDR,91.108.0.0/16,èŠ‚ç‚¹é€‰æ‹©,no-resolve
IP-CIDR,149.154.0.0/16,èŠ‚ç‚¹é€‰æ‹©,no-resolve

# ==================== ä¸‹è½½å·¥å…·ç›´è¿ ====================
PROCESS-NAME,aria2c,DIRECT
PROCESS-NAME,Thunder,DIRECT
PROCESS-NAME,qbittorrent,DIRECT
PROCESS-NAME,Transmission,DIRECT

# ==================== æœ¬åœ°ç½‘ç»œ ====================
# ä½¿ç”¨ Surge å†…ç½® LAN è§„åˆ™é›†
RULE-SET,LAN,DIRECT

# ==================== ä¸­å›½å¤§é™† ====================
GEOIP,CN,DIRECT

# ==================== å…œåº•è§„åˆ™ ====================
FINAL,Final,dns-failed

# ============================================
# Host
# ============================================
[Host]
# è·¯ç”±å™¨ç®¡ç†é¡µé¢ä½¿ç”¨ç³»ç»Ÿ DNS
*.lan = server:syslib
amplifi.lan = server:syslib
router.asus.com = server:syslib
www.miwifi.com = server:syslib
miwifi.com = server:syslib
tplogin.cn = server:syslib

# ============================================
# URL Rewrite
# ============================================
[URL Rewrite]
# æš‚æ— 

# ============================================
# Header Rewrite
# ============================================
[Header Rewrite]
# æš‚æ— 

# ============================================
# MITM
# ============================================
[MITM]
# è·³è¿‡è¯ä¹¦éªŒè¯ï¼ˆæ–¹ä¾¿ä½¿ç”¨ï¼Œä½†ä¸å¤Ÿå®‰å…¨ï¼‰
skip-server-cert-verify = true

# æ’é™¤ AI æœåŠ¡åŸŸåï¼Œé¿å… TLS é—®é¢˜
hostname = -*.googleapis.com, -ai.google.dev, -*.openai.com, -claude.ai, -*.anthropic.com

ca-p12 = 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

# CA è¯ä¹¦ï¼ˆé¦–æ¬¡ä½¿ç”¨éœ€è¦åœ¨ Surge ä¸­ç”Ÿæˆï¼‰
# ca-passphrase = 
# ca-p12 = 

